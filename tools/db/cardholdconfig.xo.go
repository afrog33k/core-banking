// Package db contains generated code from xo.
package db

// Code generated by xo. DO NOT EDIT.

import (
	"context"
	"time"

	durationpb "google.golang.org/protobuf/types/known/durationpb"

	"bnk.to/core/api/v1/cards"
)

// CardHoldConfig represents a row from 'card_hold_configs'.
type CardHoldConfig struct {
	ID           int32  `json:"id"`            // id
	MerchantCode string `json:"merchant_code"` // merchant_code
	Duration     int64  `json:"duration"`      // duration
	Description  string `json:"description"`   // description
	// xo fields
	Exists, Deleted bool
}

func NewCardHoldConfig(pb *cards.HoldConfig) (CardHoldConfig, error) {
	if pb == nil {
		return CardHoldConfig{}, ErrNilType{"CardHoldConfig"}
	}
	chc := CardHoldConfig{
		MerchantCode: pb.MerchantCode,
		Duration:     int64(pb.Duration.AsDuration()),
		Description:  pb.Description,
	}
	return chc, nil
}

func (chc CardHoldConfig) PB() (*cards.HoldConfig, error) {
	pb := &cards.HoldConfig{
		MerchantCode: chc.MerchantCode,
		Duration:     durationpb.New(time.Duration(chc.Duration)),
		Description:  chc.Description,
	}
	return pb, nil
}

type CardHoldConfigRepository interface {
	InsertCardHoldConfig(context.Context, *CardHoldConfig) error
	ListCardHoldConfigs(context.Context, string, int32, string, *ListPosition) (ListStat, []*CardHoldConfig, *ListPosition, error)

	// From card_hold_configs_pkey
	CardHoldConfigByID(context.Context, int32) (*CardHoldConfig, error)

	UpdateCardHoldConfigByID(context.Context, *CardHoldConfig) error
	DeleteCardHoldConfigByID(context.Context, int32) error

	// From card_hold_configs_merchant_code_idx
	CardHoldConfigByMerchantCode(context.Context, string) (*CardHoldConfig, error)

	UpdateCardHoldConfigByMerchantCode(context.Context, *CardHoldConfig) error
	DeleteCardHoldConfigByMerchantCode(context.Context, string) error
}
